var CACHE = 'MicrobeTraceD2019-03-27R8246';

self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open(CACHE).then(function(cache) {
      return cache.addAll([
        'components/2d_network.html',
        'components/3d_network.html',
        'components/aggregation.html',
        'components/auditor.html',
        'components/bubbles.html',
        'components/files.html',
        'components/flow_diagram.html',
        'components/gantt.html',
        'components/geo_map.html',
        'components/heatmap.html',
        'components/help.html',
        'components/histogram.html',
        'components/phylogenetic_tree.html',
        'components/scatterplot.html',
        'components/sequences.html',
        'components/table.html',
        'components/timeline.html',
        'components/waterfall.html',
        'scripts/align-sw.js',
        'scripts/common.js',
        'scripts/compute-consensus-distances.js',
        'scripts/compute-consensus.js',
        'scripts/compute-directionality.js',
        'scripts/compute-dm.js',
        'scripts/compute-links.js',
        'scripts/compute-nn.js',
        'scripts/compute-patristic-matrix.js',
        'scripts/compute-tree.js',
        'scripts/compute-triangulation.js',
        'scripts/polyfills.js',
        'node_modules/underscore/underscore-min.js',
        'node_modules/jquery/dist/jquery.min.js',
        'node_modules/popper.js/dist/umd/popper.min.js',
        'node_modules/bootstrap/dist/js/bootstrap.min.js',
        'node_modules/bootstrap4-toggle/js/bootstrap4-toggle.js',
        'node_modules/alertifyjs/build/alertify.min.js',
        'node_modules/golden-layout/dist/goldenlayout.min.js',
        'node_modules/chosen-js/chosen.jquery.min.js',
        'node_modules/fileto/index.js',
        'node_modules/screenfull/dist/screenfull.js',
        'node_modules/clipboard/dist/clipboard.min.js',
        'node_modules/moment/min/moment-with-locales.min.js',
        'node_modules/papaparse/papaparse.min.js',
        'node_modules/jszip/dist/jszip.min.js',
        'node_modules/xlsx/dist/xlsx.core.min.js',
        'node_modules/xss/dist/xss.min.js',
        'node_modules/tn93/dist/tn93.min.js',
        'node_modules/d3/dist/d3.min.js',
        'node_modules/d3-force-attract/dist/d3-force-attract.min.js',
        'node_modules/d3-symbol-extra/build/d3-symbol-extra.min.js',
        'node_modules/html5sortable/dist/html5sortable.min.js',
        'node_modules/plotly.js-dist/plotly.js',
        'node_modules/tabulator-tables/dist/js/tabulator.min.js',
        'node_modules/tidytree/dist/tidytree.min.js',
        'node_modules/3d-force-graph/dist/3d-force-graph.min.js',
        'node_modules/leaflet/dist/leaflet.js',
        'node_modules/leaflet-image/leaflet-image.js',
        'node_modules/alignment-viewer/dist/alignment-viewer.min.js',
        'node_modules/marked/marked.min.js',
        'node_modules/localforage/dist/localforage.min.js',
        'node_modules/bioseq/dist/bioseq.min.js',
        'node_modules/patristic/dist/patristic.min.js',
        'vendor/FileSaver.min.js',
        'vendor/saveSvgAsPng.js',
        'vendor/shpwrite.js',
        'stylesheets/main.css',
        'node_modules/bootstrap/dist/css/bootstrap.min.css',
        'node_modules/bootstrap4-toggle/css/bootstrap4-toggle.css',
        'node_modules/golden-layout/src/css/goldenlayout-base.css',
        'node_modules/golden-layout/src/css/goldenlayout-light-theme.css',
        'node_modules/chosen-js/chosen.css',
        'node_modules/alertifyjs/build/css/alertify.min.css',
        'node_modules/open-iconic/font/css/open-iconic-bootstrap.min.css',
        'node_modules/leaflet/dist/leaflet.css',
        'node_modules/tabulator-tables/dist/css/tabulator.min.css',
        'node_modules/tabulator-tables/dist/css/bootstrap/tabulator_bootstrap4.min.css',
        'img/Back_Arrow.png',
        'img/icon.ico',
        'img/image128.ico',
        'img/image128.png',
        'img/image16.ico',
        'img/image16.png',
        'img/image200.ico',
        'img/image200.png',
        'img/image256.ico',
        'img/image256.png',
        'img/image32.ico',
        'img/image32.png',
        'img/image64.ico',
        'img/image64.png',
        'img/spinner.gif',
        'img/transimage128.png',
        'data/counties.json',
        'data/countries.json',
        'data/states.json',
        'data/tracts.csv',
        'data/zipcodes.csv',
        'help/3D-Network.md',
        'help/Acknowledgements.md',
        'help/Alignment.md',
        'help/Bubbles.md',
        'help/Contributing.md',
        'help/Distance-Matrices.md',
        'help/Distance-Metrics.md',
        'help/Edge-CSVs.md',
        'help/FASTA-Files.md',
        'help/Flow-Diagram.md',
        'help/_Footer.md',
        'help/Heatmap.md',
        'help/Histogram.md',
        'help/Home.md',
        'help/Inputs.md',
        'help/Installation.md',
        'help/Internet-Explorer.md',
        'help/Loading-Files.md',
        'help/Map.md',
        'help/MicrobeTrace-and-its-Alternatives.md',
        'help/Network-View.md',
        'help/Node-CSVs.md',
        'help/Offline-Usage.md',
        'help/References.md',
        'help/Security.md',
        'help/Sequences.md',
        'help/SNPs.md',
        'help/Style-Files.md',
        'help/Suspicious-Network-Topologies.md',
        'help/System-Requirements.md',
        'help/Table.md',
        'help/Theory.md',
        'help/Tile-Maps.md',
        'help/Troubleshooting.md',
        'help/z-Create-a-New-View.md',
        'help/z-Deployment.md',
        'help/z-Development.md',
        'help/z-Nomenclature.md',
        'help/z-Unwritten-Documentation-Requirements.md',
        '/',
        'index.html',
        'package.json',
        'manifest.json',
        'node_modules/chosen-js/chosen-sprite.png',
        'node_modules/open-iconic/font/fonts/open-iconic.woff',
        'node_modules/open-iconic/font/fonts/open-iconic.ttf',
        'node_modules/open-iconic/font/fonts/open-iconic.otf',
        'node_modules/papaparse/papaparse.min.js?papaworker',
      ]);
    })
  );
});

self.addEventListener('fetch', function(evt){
  evt.respondWith(fetch(evt.request).catch(function(){
    return caches.open(CACHE).then(function(cache){
      return cache.match(evt.request).then(function(matching){
        return matching || Promise.reject('no-match');
      });
    });
  }));
});

